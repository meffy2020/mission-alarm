# Mission Alarm (Arduino Edition)

카카오톡 알림과 아두이노 센서 미션이 결합된 스마트 알람 웹 애플리케이션입니다.

## 🌟 주요 기능

1.  **스마트 알람**: 사용자가 설정한 시간에 카카오톡으로 "기상 알림"을 보냅니다.
2.  **센서 미션**: 알람을 끄려면 아두이노 센서를 이용해 미션을 수행해야 합니다.
    *   🖐 **거리 조절**: 손을 특정 거리(cm)에 정확히 위치시키기.
    *   💡 **빛 조절**: 센서에 빛을 비추거나(섬광탄), 어둡게 가리기(암전).
    *   🧩 **퀴즈**: 일반적인 상식/수학 퀴즈도 포함.
3.  **실시간 연동**: 웹페이지에서 아두이노 센서 값을 실시간으로 확인하며 미션을 수행합니다.

## 📁 프로젝트 구조

```
mission-alarm/
├── .env                 # 설정 파일 (카카오 API 키, 시리얼 포트 등)
├── backend/             # FastAPI 서버 코드
│   ├── serial_service.py # 아두이노 시리얼 통신 서비스
│   ├── scheduler.py     # 알림 스케줄러
│   └── ...
├── frontend/            # 웹 페이지 (HTML/CSS/JS)
└── ...
```

## 🚀 설치 및 실행

### 1. 환경 설정

필요한 파이썬 라이브러리를 설치합니다.

```bash
cd mission-alarm
pip install -r requirements.txt
```

### 2. 아두이노 연결 및 포트 확인 (중요!)

아두이노를 PC에 연결한 후, 올바른 시리얼 포트를 찾아야 합니다.

*   **Mac/Linux**: 터미널에 `ls /dev/cu.*` 입력.
    *   보통 `/dev/cu.usbmodem...` 또는 `/dev/cu.usbserial...` 형태입니다.
*   **Windows**: 장치 관리자에서 `COM3`, `COM4` 등을 확인.

확인한 포트 주소를 `.env` 파일에 입력하세요:

```ini
# .env 파일
SERIAL_PORT=/dev/cu.usbmodem1101  <-- 본인의 포트로 수정
SERIAL_BAUDRATE=9600
```

### 3. 서버 실행

```bash
uvicorn backend.main:app --reload
```

### 4. 사용하기

1.  웹사이트(`http://localhost:8000`) 접속 & 회원가입.
2.  알람 받고 싶은 시간 등록.
3.  알람 시간이 되면 카카오톡 메시지 도착!
4.  링크를 타고 들어가 미션(센서 조작 등) 수행.

## 🛠 아두이노 준비

아두이노에 아래 부품이 연결되어 있어야 합니다.

*   **초음파 센서 (HC-SR04)**: Trig(9번), Echo(8번)
*   **조도 센서 (CDS)**: A0번 핀
*   **부저**: 3번 핀 (선택 사항)

아두이노 코드(`audino.ino`)를 업로드해두면, 서버가 자동으로 데이터를 읽어옵니다.

## 🐞 문제 해결

*   **센서 값이 안 떠요**: 
    1. `.env`의 `SERIAL_PORT`가 정확한지 확인하세요.
    2. 아두이노 IDE의 시리얼 모니터가 켜져 있다면 끄세요 (포트 충돌).
    3. 서버 로그에 `Connected to Arduino`가 뜨는지 확인하세요.